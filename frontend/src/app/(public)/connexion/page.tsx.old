import axios from "axios";
import Link from "next/link";
import ConnexionForm from "./connexionForm";

export type ConnexionFormProps = {
    mail: string;
    setMail: (v: string) => void;
    password: string;
    setPassword: (v: string) => void;
};

export default function ConnexionPage(props: ConnexionFormProps) {
    const { mail, setMail, password, setPassword } = props;

    const handleSubmit = async (e: React.FormEvent) => {
        e.preventDefault();
        const form = e.target as HTMLFormElement;
        const formData = new FormData(form);
        const mail = formData.get("mail");
        const password = formData.get("password");

        try {
            await axios.post(
                `${process.env.NEXT_PUBLIC_API_URL}/login`,
                {
                    mail,
                    password,
                },
                { withCredentials: true }
            );
            console.log("Connexion r√©ussie");
        } catch (error) {
            console.error("Erreur lors de la connexion", error);
        }
    };

    return (
        <>
            <h2 className="mt-12 text-5xl font-bold text-center">Connexion</h2>
            <div className="max-w-md mx-auto mt-8 p-6 bg-white shadow-md rounded-lg">
                <ConnexionForm
                    mail={mail}
                    setMail={setMail}
                    password={password}
                    setPassword={setPassword}
                ></ConnexionForm>
                <Link
                    href="/inscription"
                    className="btn w-full bg-purple-600 text-white p-2 rounded hover:bg-purple-700 mt-2"
                >
                    Inscription
                </Link>
            </div>
        </>
    );
}
